using Nemerle.Collections;
using PipelineMacro;
using System.IO;

[ Record ]
class LoadJsonDataTask : ITask
{
	public directory : string;

	public MapItems(_ : list[ITaskItem]) : list[TaskMapping]
	{
		def CreateTaskMapping(file)
		{
			TaskMapping(this, [], [ JsonItem(file) ]);
		}
		Directory.GetFiles(directory, "*.json")
			.Map(CreateTaskMapping).NToList();
	}

	private Compute() : void
	{
	}
}
