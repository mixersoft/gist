using Nemerle.Collections;
using Nemerle.Utility;

[ Record ]
class MockTask : ITask
{
	[ Accessor ] private name : string;

	private itemMap : list[list[string] * list[string]];
	private items   : list[MockTaskItem];

	public MapItems(_ : list[ITaskItem]) : list[TaskMapping]
	{
		def GetItemsByPath(paths)
		{
			paths.Map(path => items.Find(item => item.Path == path).Value)
		}
		def CreateMapping(i, o)
		{
			TaskMapping(this, GetItemsByPath(i), GetItemsByPath(o));
		}
		itemMap.Map(CreateMapping);
	}

	public Compute
		( inputs     : list[ITaskItem]
		, outputs    : list[ITaskItem]
		, parameters : Parameters
		) : void
	{
		_ = inputs; _ = parameters;
		foreach (output is MockTaskItem in outputs)
			output.Compute();
	}
}
